  ADDR B1 B2 B3 B4 thrass11.tmp                                     PAGE       1

                   STACK   EQU     $00FF
                   PIOC    EQU     $1002   Parallel I/O Control Register
                   PORTCL  EQU     $1005
                   lights  EQU     $1004
                   IRQ     EQU     $FFF2   IRQ vector
                   RESET   EQU     $FFFE   RESET vector


                           ORG     $c000
  C000 8E 00 FF    loop    LDS     #STACK
  C003 C6 C0               LDAB    #%11000000
  C005 F7 10 02            STAB    PIOC    enable Strobe A interrupt on rising
.                  edge
  C008 0E                  CLI
  C009 18 FE 00 00         LDY     count
  C00D 27 03               BEQ     if
  C00F 4C          else    INCA
  C010 20 01               BRA     delay
  C012 4A          if      DECA
  C013 08          delay   INX
  C014 BC C3 50            CPX     dlen
  C017 2E FA               BGT     delay
  C019 CE 00 00            LDX     #0
  C01C B7 10 04            STAA    lights
  C01F 20 DF               BRA     loop

  C021 18 FE 00 00 IRQISR  LDY     count
  C025 18 08               INY
  C027 18 FF 00 00         STY     count
  C02B FC 00 00            LDD     count
  C02E CE 00 02            LDX     #2
  C031 02                  IDIV
  C032 FD 00 00            STD     count
  C035 B6 10 02            LDAA    PIOC
  C038 B6 10 05            LDAA    PORTCL
  C03B 3B                  RTI

                           ORG     RESET
  FFFE C0 00               FDB     $c000   initialise reset vector
                           ORG     IRQ
  FFF2 C0 21               FDB     IRQISR  initialise IRQ vector
                           ORG     $0000
                   count   RMB     2
                   dlen    EQU     50000


  Symbol Table 

  PORTCL             1005
  DELAY              C013
  IRQ                FFF2
  COUNT              0000
  PIOC               1002
  IF                 C012
  LIGHTS             1004
  RESET              FFFE
  IRQISR             C021
  DLEN               C350
  STACK              00FF
  ELSE               C00F
  LOOP               C000
